<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pboardDAO">

	<select id="pboardDAO.selectBoard" resultType="SIT_SEMI_PROJECT.PHH.board.PboardVO">
		SELECT 
			b.no
			, b.user_no AS userNo
			, u.name AS name
			, b.title
			, b.contents
			, b.count
			, b.file_name AS fileName
			, DATE_FORMAT(b.cre_date, '%Y-%m-%d') AS creDate
			, DATE_FORMAT(b.mod_date, '%Y-%m-%d') AS modDate
			, b.gubun
		FROM
			phh_board b
		JOIN phh_user u ON b.user_no = u.no;
	</select>
	
	<select id="pboardDAO.viewBoard" parameterType="int" resultType="SIT_SEMI_PROJECT.PHH.board.PboardVO">
		SELECT 
			b.no
			, b.user_no AS userNo
			, u.name AS name
			, b.title
			, b.contents
			, b.count
			, b.file_name AS fileName
			, DATE_FORMAT(b.cre_date, '%Y-%m-%d') AS creDate
			, DATE_FORMAT(b.mod_date, '%Y-%m-%d') AS modDate
			, b.gubun
			, u.pass
		FROM
			phh_board b
		JOIN phh_user u ON b.user_no = u.no
		WHERE b.no = #{no};
	</select>	
	
	<insert id="pboardDAO.insertBoard" parameterType="SIT_SEMI_PROJECT.PHH.board.PboardVO">
		INSERT into phh_board(
			user_no
			, title
			, contents
			, count
		) VALUES (
			#{userNo}
			, #{title}
			, #{contents}
			, #{count}
		)
	</insert>
	
	<update id="pboardDAO.updateBoard" parameterType="SIT_SEMI_PROJECT.PHH.board.PboardVO">
		UPDATE phh_board 
			SET title= #{title}
			, contents= #{contents}
			, mod_date = NOW()
			WHERE no = #{no}
	</update>
	
	<update id="pboardDAO.countBoard" parameterType="int">
		UPDATE phh_board
			SET count = count + 1
			WHERE no = #{no}
	</update>
	
	<delete id="pboardDAO.deleteBoard" parameterType="int">
		delete from phh_board WHERE no = #{no}
	</delete>


</mapper>